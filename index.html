
<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Запись — тёмная версия</title>
<style>
:root{
  --bg:#0f0f13; --card:#17171b; --muted:#9aa0a6;
  --accent1:#6A11CB; --accent2:#2575FC; --orange:#ffa500; --danger:#ff6b6b;
  --text:#eaf0f6;
}
*{box-sizing:border-box}
body{margin:0;background:linear-gradient(180deg,#08080a,var(--bg));color:var(--text);font-family:Inter,Segoe UI,Arial,sans-serif;-webkit-font-smoothing:antialiased;}
.container{max-width:980px;margin:18px auto;padding:12px;display:grid;grid-template-columns:1fr 360px;gap:12px}

.card{background:var(--card);border-radius:14px;padding:14px;box-shadow:0 8px 30px rgba(0,0,0,.6);transition:transform .18s;overflow:hidden}
.card:active{transform:scale(.997)}
.header{display:flex;align-items:center;justify-content:space-between;gap:8px}
.header h3{margin:0;font-size:18px}
.controls button{background:transparent;border:none;color:var(--muted);font-size:20px;padding:6px;cursor:pointer;border-radius:8px}
.controls button:active{transform:scale(.96)}

/* calendar grid */
.grid{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;margin-top:10px}
.dow{font-size:12px;color:var(--muted);text-align:center;font-weight:600;text-transform:uppercase}
.day{padding:10px;border-radius:10px;text-align:center;cursor:pointer;min-height:56px;display:flex;flex-direction:column;justify-content:center;align-items:center;background:transparent;color:var(--text)}
.day.today{box-shadow:0 0 0 2px rgba(255,255,255,.03) inset}
.day.booked{box-shadow:inset 0 -6px 0 rgba(255,165,0,.05)}
.day.selected{background:linear-gradient(135deg,var(--accent1),var(--accent2));color:#fff}

/* slots */
.slots-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px}
.slot{background:#232328;color:var(--orange);font-size:18px;font-weight:600;border-radius:10px;padding:12px;display:flex;align-items:center;justify-content:center;cursor:pointer;user-select:none}
.slot:hover{transform:scale(1.04)}
.slot.booked{background:var(--danger);color:#fff;cursor:not-allowed;opacity:0.95}
.slot.past{opacity:.45;cursor:not-allowed}
.slot.selected{background:linear-gradient(135deg,var(--accent1),var(--accent2));color:#fff}

/* form */
form input, form select, form button{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,.04);background:rgba(255,255,255,0.02);color:var(--text);margin-top:10px;font-size:16px}
form button{background:linear-gradient(135deg,var(--accent1),var(--accent2));border:none;color:#fff;font-weight:600;cursor:pointer}

/* right column */
.profile{display:flex;gap:12px;align-items:center}
.avatar{width:96px;height:96px;border-radius:50%;object-fit:cover;border:3px solid rgba(255,255,255,.06);box-shadow:0 8px 20px rgba(0,0,0,.6)}
.info h4{margin:0 0 6px 0}
.info p{margin:0;color:var(--muted)}

/* admin panel */
.admin-panel{position:fixed;top:16px;right:12px;width:420px;height:82vh;transform:translateX(110%);transition:transform .28s cubic-bezier(.2,.9,.2,1);z-index:1200;border-radius:12px;overflow:auto;box-shadow:0 20px 60px rgba(0,0,0,.7);background:linear-gradient(180deg,#0f1114,#141416)}
.admin-panel.open{transform:translateX(0)}
.admin-panel .pad{padding:14px}
.btn{display:inline-block;padding:10px 12px;border-radius:10px;border:none;background:linear-gradient(135deg,var(--accent1),var(--accent2));color:#fff;cursor:pointer;font-weight:600}
.small{font-size:13px;color:var(--muted)}

/* modals */
.modal{display:none;position:fixed;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,.5);align-items:center;justify-content:center;z-index:1300}
.modal.open{display:flex}
.modal .box{background:#0c0c0f;padding:16px;border-radius:12px;width:420px;max-width:92%}

/* responsive */
@media (max-width:980px){.container{grid-template-columns:1fr;} .avatar{width:80px;height:80px} .slots-grid{grid-template-columns:repeat(2,1fr)}}

/* weekend highlight */
.day.weekend{background:linear-gradient(180deg, rgba(255,40,40,0.06), rgba(255,40,40,0.02)); color:#ff6b6b; border:1px solid rgba(255,40,40,0.06);}
.info a{display:block;padding:10px 12px;margin-top:6px;border:1px solid rgba(255,255,255,0.04);border-radius:10px;background:rgba(255,255,255,0.01);font-size:16px;text-decoration:none}
.info span{display:block;padding:10px 12px;margin-top:6px;border:1px solid rgba(255,255,255,0.04);border-radius:10px;background:rgba(255,255,255,0.01);font-size:16px}


/* brand colors for links */
.info a.instagram{color:#C13584!important;}
.info a.whatsapp{color:#25D366!important;}
.info a.viber{color:#7360f2!important;}
.info a.vk{color:#0077FF!important;}
.info a.yandex{color:#FF0000!important;}


/* Mobile admin panel: full screen and slide from bottom */
@media (max-width:600px){
  .admin-panel{left:0;right:0;top:auto;bottom:0;width:100%;height:100vh;border-radius:12px 12px 0 0;transform:translateY(110%);transition:transform .28s cubic-bezier(.2,.9,.2,1);}
  .admin-panel.open{transform:translateY(0);}
  /* ensure it overlays properly */
  body.modal-open{overflow:hidden;height:100vh;}
}

</style>
</head>
<body>

<div class="container">
  <div class="left">
    <div class="card">
      <div class="header">
        <div class="controls">
          <button id="prev" aria-label="prev">‹</button>
        </div>
        <h3 id="month">—</h3>
        <div class="controls"><button id="next" aria-label="next">›</button></div>
      </div>

      <div class="card">
        <div style="display:flex;gap:8px;align-items:center;justify-content:space-between">
          <strong>Календарь</strong>
          <span class="small">Пн — выходной</span>
        </div>
        <div id="calendar" class="grid" style="margin-top:10px"></div>
      </div>

      <div class="card" style="margin-top:12px">
        <strong>Выберите время</strong>
        <div id="slots" class="slots-grid"></div>
      </div>

      <div class="card" style="margin-top:12px">
        <strong>Запись</strong>
        <form id="form">
          <select id="service" required>
            <option value="">Выберите услугу</option>
            <option value="Стрижка" data-duration="1">Стрижка — 1 час</option>
            <option value="Окрашивание" data-duration="3">Окрашивание — 3 часа</option>
            <option value="Укладка" data-duration="2">Укладка — 2 часа</option>
            <option value="Вечерняя прическа" data-duration="2">Вечерняя прическа — 2 часа</option>
            <option value="Консультация" data-duration="1">Консультация — 1 час</option>
          </select>
          <input id="name" placeholder="Ваше имя" required />
          <input id="phone" placeholder="Телефон (+375...)" required />
          <button type="submit">Подтвердить</button>
        </form>
      </div>
    </div>
  </div>

  <div class="right">
    <div class="card profile">
      <img class="avatar" id="avatar" src=data:image/jpeg;base64,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 alt="Татьяна" />
      
<div class="info">
    <h4>Татьяна Ляхар</h4>
    <p class="small">Профессиональный парикмахер-стилист</p>
    <div class="small" style="display:flex;flex-direction:column;gap:4px">
      <span style="color:var(--orange);">+375 29 788-82-80</span>
      <a  href="https://www.instagram.com/tatianaliakhar" class="instagram" target="_blank">Instagram</a>
      <a  href="https://wa.me/375297888280" class="whatsapp" target="_blank">WhatsApp</a>
      <a  href="viber://chat?number=%2B375297888280" class="viber" target="_blank">Viber</a>
      <a  href="https://vk.com/id39250640" class="vk" target="_blank">VK</a>
      <a  href="https://yandex.by/maps/org/kapous_professional/245136758949/?indoorLevel=1&ll=24.459418%2C53.163536&z=17" class="yandex" target="_blank">Адрес (Яндекс.Карты)</a>
    </div>
</div>

</div>

    <div class="card" id="scheduleBlock" style="margin-top:12px">
        <strong>График работы</strong>
      <p class="small" style="margin-top:8px">Пн: выходной<br>Вт–Пт: 10:00–18:00<br>Сб–Вс: 10:00–15:00</p>
    </div>
  </div>
</div>

<!-- admin panel -->
<div id="adminPanel" class="admin-panel" aria-hidden="true">
  <div class="pad">
    <h3>Панель администратора</h3>
    <div id="loginBox">
      <input id="adminPassword" type="password" placeholder="Пароль" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,.04);background:transparent;color:var(--text)" />
      <div style="display:flex;gap:8px;margin-top:10px">
        <button id="loginBtn" class="btn">Войти</button>
        <button id="closePanel" class="btn" style="background:#333">Закрыть</button>
      </div>
      <p id="loginError" style="color:var(--danger);display:none;margin-top:8px">Неверный пароль</p>
    </div>
    <div id="adminContent" style="display:none;margin-top:12px">      <button id="addHolidayBtn" class="btn" style="background:#b33">Добавить выходной</button>      <div style="margin-top:10px"><strong>Выходные (админ)</strong><div id="holidaysList" class="list" style="margin-top:6px"></div></div>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <button id="addBreakBtn" class="btn">Добавить перерыв</button>
        <button id="clearAll" class="btn" style="background:#444">Удалить все</button>
        <button id="logoutBtn" class="btn" style="background:#222">Выйти</button>
      </div>
      <h4 style="margin-top:12px">Перерывы</h4>
      <div id="breaksList"></div>
      <h4 style="margin-top:12px">Записи</h4>
      <div id="bookingsList"></div>
    </div>
  </div>
</div>

<!-- Modals -->

<div id="holidayModal" class="modal"><div class="box">
  <h4>Добавить выходной</h4>
  <input id="holidayDate" type="date" />
  <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:10px">
    <button id="saveHoliday" class="btn">Сохранить</button>
    <button id="cancelHoliday" class="btn" style="background:#444">Отмена</button>
  </div>
</div></div>

<div id="breakModal" class="modal"><div class="box">
  <h4>Перерыв</h4>
  <input id="breakDate" type="date" />
  <input id="breakStart" type="time" />
  <input id="breakEnd" type="time" />
  <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:10px">
    <button id="saveBreak" class="btn">Сохранить</button>
    <button id="cancelBreak" class="btn" style="background:#444">Отмена</button>
  </div>
</div></div>

<div id="moveModal" class="modal"><div class="box">
  <h4>Перенос записи</h4>
  <input id="moveDate" type="date" />
  <select id="moveTime"></select>
  <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:10px">
    <button id="confirmMove" class="btn">Перенести</button>
    <button id="cancelMove" class="btn" style="background:#444">Отмена</button>
  </div>
</div></div>

<script>
/* Data */
let current = new Date();
let selectedDate = null;
let selectedTime = null;
let bookings = JSON.parse(localStorage.getItem('bookings')||'[]');
let breaks = JSON.parse(localStorage.getItem('breaks')||'[]');

/* Elements */
const calendarEl = document.getElementById('calendar');
const monthEl = document.getElementById('month');
const prevBtn = document.getElementById('prev');
const nextBtn = document.getElementById('next');
const slotsEl = document.getElementById('slots');
const form = document.getElementById('form');
const serviceEl = document.getElementById('service');

/* Work schedule (getDay:0=Sun,1=Mon...) */
const workSchedule = {
  0: {start:10,end:15},
  1: null,
  2: {start:10,end:18},
  3: {start:10,end:18},
  4: {start:10,end:18},
  5: {start:10,end:18},
  6: {start:10,end:15}
};

function localIso(d){ const y=d.getFullYear(); const m=String(d.getMonth()+1).padStart(2,'0'); const day=String(d.getDate()).padStart(2,'0'); return y+'-'+m+'-'+day; }

function renderCalendar(){ const y=current.getFullYear(), m=current.getMonth(); monthEl.textContent = current.toLocaleDateString('ru-RU',{month:'long', year:'numeric'}); calendarEl.innerHTML=''; const days=['Пн','Вт','Ср','Чт','Пт','Сб','Вс']; days.forEach(d=>{const el=document.createElement('div');el.className='dow';el.textContent=d;calendarEl.appendChild(el);}); const first=new Date(y,m,1), last=new Date(y,m+1,0); const start = (first.getDay()||7)-1; for(let i=0;i<start;i++){const e=document.createElement('div');e.className='day other';calendarEl.appendChild(e);} for(let d=1; d<= last.getDate(); d++){ const date=new Date(y,m,d); const iso=localIso(date); const el=document.createElement('div'); el.className='day'; el.textContent=d; el.dataset.date=iso; if(date.toDateString()=== (new Date()).toDateString()) el.classList.add('today'); const dayBookings = bookings.filter(b=>b.date===iso); if(dayBookings.length) el.classList.add('booked'); const dayBreaks = breaks.filter(br=>br.date===iso); if(dayBreaks.length) el.classList.add('break-day'); if(selectedDate===iso) el.classList.add('selected'); el.addEventListener('click', ()=>{ selectedDate=iso; selectedTime=null; renderCalendar(); renderSlots(); }); calendarEl.appendChild(el);} }

function toMinutes(t){ const [hh,mm]=t.split(':').map(Number); return hh*60 + (mm||0); }
function nowIsAfter(dateIso, timeStr){ const dt=new Date(dateIso+'T'+timeStr+':00'); return new Date() > dt; }

function isAvailable(dateIso, startTime, duration, ignoreId=null){
  const s=toMinutes(startTime), e=s+duration*60; const dow=new Date(dateIso).getDay(); const sched=workSchedule[dow]; if(!sched) return false; if(e>sched.end*60) return false; if(nowIsAfter(dateIso,startTime)) return false;
  for(const br of breaks.filter(b=>b.date===dateIso)){ const brs=toMinutes(br.start), bre=toMinutes(br.end); if(!(e<=brs||s>=bre)) return false; }
  for(const b of bookings.filter(b=>b.date===dateIso)){ if(ignoreId && b.id===ignoreId) continue; const bs=toMinutes(b.time), be=bs+b.duration*60; if(!(e<=bs||s>=be)) return false;}
  return true;
}

function renderSlots(){
  slotsEl.innerHTML='';
  if(!selectedDate){ slotsEl.innerHTML='<div class="small" style="grid-column:1/-1;text-align:center">Сначала выберите дату</div>'; return; }
  const dow = new Date(selectedDate).getDay();
  const sched = workSchedule[dow];
  if(!sched){ slotsEl.innerHTML='<div class="small" style="grid-column:1/-1;text-align:center;color:var(--danger)">Выходной</div>'; return; }
  for(let h=sched.start; h<=sched.end; h++){
    const time = String(h).padStart(2,'0')+':00';
    const btn=document.createElement('div'); btn.className='slot'; btn.textContent=time; btn.dataset.time=time;
    const booked = bookings.some(b=>b.date===selectedDate && b.time===time);
    if(booked) btn.classList.add('booked');
    if(nowIsAfter(selectedDate,time)) btn.classList.add('past');
    if(selectedTime===time) btn.classList.add('selected');
    btn.addEventListener('click', ()=>{
      if(btn.classList.contains('booked')||btn.classList.contains('past')) return;
      const opt = serviceEl.options[serviceEl.selectedIndex]; const dur = parseInt(opt.dataset.duration||'1');
      if(!serviceEl.value){ alert('Выберите услугу'); return; }
      if(!isAvailable(selectedDate,time,dur)) { alert('Недостаточно времени/конфликт'); return; }
      selectedTime=time; renderSlots();
      if(navigator.vibrate) navigator.vibrate(30);
    });
    slotsEl.appendChild(btn);
  }
}

/* navigation */
prevBtn.addEventListener('click', ()=>{ current.setMonth(current.getMonth()-1); renderCalendar(); });
nextBtn.addEventListener('click', ()=>{ current.setMonth(current.getMonth()+1); renderCalendar(); });

/* booking */
form.addEventListener('submit', e=>{ e.preventDefault(); const name=form.querySelector('#name').value.trim(); const phone=form.querySelector('#phone').value.trim(); const service=serviceEl.value; if(!selectedDate||!selectedTime){ alert('Выберите дату и время'); return; } const dur=parseInt(serviceEl.options[serviceEl.selectedIndex].dataset.duration||'1'); if(!isAvailable(selectedDate,selectedTime,dur)){ alert('Время занято'); renderSlots(); return; } const booking={id:Date.now(),date:selectedDate,time:selectedTime,name,phone,service,duration:dur}; bookings.push(booking); localStorage.setItem('bookings',JSON.stringify(bookings)); // notify master
  const master = '+375297888280'; const msg = `Новая запись\n${booking.name} ${booking.phone}\n${booking.date} ${booking.time}\n${booking.service}`; window.open(`https://wa.me/${master.replace(/\D/g,'')}?text=${encodeURIComponent(msg)}`,'_blank');
  alert('Запись подтверждена'); form.reset(); selectedTime=null; renderCalendar(); renderSlots();
});

/* admin panel logic */
const adminPanel = document.getElementById('adminPanel');
const loginBox = document.getElementById('loginBox');
const loginBtn = document.getElementById('loginBtn');
const adminPassword = document.getElementById('adminPassword');
const loginError = document.getElementById('loginError');
const adminContent = document.getElementById('adminContent');
const bookingsList = document.getElementById('bookingsList');
const breaksList = document.getElementById('breaksList');
const addBreakBtn = document.getElementById('addBreakBtn');
const clearAll = document.getElementById('clearAll');
const logoutBtn = document.getElementById('logoutBtn');
const closePanel = document.getElementById('closePanel');

function openAdmin(){
  adminPanel.classList.add('open'); adminPanel.setAttribute('aria-hidden','false');
  if(sessionStorage.getItem('isAdmin')==='true'){ loginBox.style.display='none'; adminContent.style.display='block'; renderAdmin(); }
}
function closeAdmin(){ adminPanel.classList.remove('open'); adminPanel.setAttribute('aria-hidden','true'); }
closePanel.addEventListener('click', closeAdmin);

loginBtn.addEventListener('click', ()=>{
  if(adminPassword.value==='andron18'){ sessionStorage.setItem('isAdmin','true'); loginBox.style.display='none'; adminContent.style.display='block'; adminPassword.value=''; renderAdmin(); } else { loginError.style.display='block'; }
});

function renderAdmin(){
  bookingsList.innerHTML=''; breaksList.innerHTML='';
  if(bookings.length===0) bookingsList.innerHTML='<div class="small">Нет записей</div>';
  bookings.slice().sort((a,b)=>new Date(a.date+'T'+a.time)-new Date(b.date+'T'+b.time)).forEach(b=>{
    const row=document.createElement('div'); row.className='booking-item'; row.style.display='flex'; row.style.justifyContent='space-between'; row.style.alignItems='center'; row.style.gap='8px'; row.innerHTML=`<div><strong>${b.name}</strong><div class="small">${b.phone}</div><div class="small">${b.date} ${b.time} — ${b.service}</div></div>`;
    const actions=document.createElement('div');
    const del=document.createElement('button'); del.className='btn'; del.textContent='Удалить'; del.addEventListener('click', ()=>{ if(confirm('Удалить?')){ bookings=bookings.filter(x=>x.id!==b.id); localStorage.setItem('bookings',JSON.stringify(bookings)); renderAdmin(); renderCalendar(); renderSlots(); } });
    const mv=document.createElement('button'); mv.className='btn'; mv.style.background='#444'; mv.textContent='Перенести'; mv.addEventListener('click', ()=>openMoveModal(b.id));
    actions.appendChild(mv); actions.appendChild(del); row.appendChild(actions);
    bookingsList.appendChild(row);
  });
  if(breaks.length===0) breaksList.innerHTML='<div class="small">Нет перерывов</div>';
  breaks.slice().sort((a,b)=>a.date.localeCompare(b.date)||a.start.localeCompare(b.start)).forEach(br=>{
    const r=document.createElement('div'); r.className='booking-item'; r.style.display='flex'; r.style.justifyContent='space-between'; r.innerHTML=`<div><strong>${br.date}</strong><div class="small">${br.start} – ${br.end}</div></div>`;
    const del=document.createElement('button'); del.className='btn'; del.style.background='#444'; del.textContent='Удалить'; del.addEventListener('click', ()=>{ if(confirm('Удалить перерыв?')){ breaks=breaks.filter(x=>x.id!==br.id); localStorage.setItem('breaks',JSON.stringify(breaks)); renderAdmin(); renderCalendar(); renderSlots(); } });
    r.appendChild(del); breaksList.appendChild(r);
  });
}

addBreakBtn.addEventListener('click', ()=>{ openBreakModal(); });

function openBreakModal(id=null){
  document.getElementById('breakModal').classList.add('open');
  if(id){ const br=breaks.find(x=>x.id===id); if(br){ document.getElementById('breakDate').value=br.date; document.getElementById('breakStart').value=br.start; document.getElementById('breakEnd').value=br.end; } }
}
document.getElementById('cancelBreak').addEventListener('click', ()=>{ document.getElementById('breakModal').classList.remove('open'); });
document.getElementById('saveBreak').addEventListener('click', ()=>{
  const d=document.getElementById('breakDate').value; const s=document.getElementById('breakStart').value; const e=document.getElementById('breakEnd').value;
  if(!d||!s||!e){ alert('Заполните'); return;}
  if(toMinutes(s)>=toMinutes(e)){ alert('Неверно'); return; }
  // remove conflicting bookings
  const conflict = bookings.some(b=>b.date===d && !(toMinutes(b.time)+b.duration*60 <= toMinutes(s) || toMinutes(b.time) >= toMinutes(e)));
  if(conflict){ if(!confirm('Перерыв пересекается с записями. Удалить конфликтующие?')) return; bookings = bookings.filter(b=>!(b.date===d && !(toMinutes(b.time)+b.duration*60 <= toMinutes(s) || toMinutes(b.time) >= toMinutes(e)))); localStorage.setItem('bookings',JSON.stringify(bookings)); }
  breaks.push({id:Date.now(),date:d,start:s,end:e}); localStorage.setItem('breaks',JSON.stringify(breaks));
  document.getElementById('breakModal').classList.remove('open'); renderAdmin(); renderCalendar(); renderSlots();
});

/* move modal */
let movingId=null;
function openMoveModal(id){
  movingId=id; document.getElementById('moveModal').classList.add('open');
  const b=bookings.find(x=>x.id===id); if(b){ document.getElementById('moveDate').value=b.date; populateMoveTimes(b.date,b.duration); document.getElementById('moveTime').value=b.time; }
}
function populateMoveTimes(date,duration){
  const sel=document.getElementById('moveTime'); sel.innerHTML='';
  const dow=new Date(date).getDay(); const sched=workSchedule[dow]; if(!sched){ sel.innerHTML='<option>Выходной</option>'; return; }
  for(let h=sched.start; h<=sched.end; h++){ const t=String(h).padStart(2,'0')+':00'; const opt=document.createElement('option'); opt.value=t; opt.textContent=t; if(!isAvailable(date,t,duration,movingId)){ opt.disabled=true; opt.textContent=t+' (недоступно)'; } sel.appendChild(opt); }
}
document.getElementById('cancelMove').addEventListener('click', ()=>{ document.getElementById('moveModal').classList.remove('open'); movingId=null; });
document.getElementById('confirmMove').addEventListener('click', ()=>{
  const b=bookings.find(x=>x.id===movingId); if(!b) return; const nd=document.getElementById('moveDate').value; const nt=document.getElementById('moveTime').value; if(!isAvailable(nd,nt,b.duration,movingId)){ alert('Недоступно'); return; } b.date=nd; b.time=nt; localStorage.setItem('bookings',JSON.stringify(bookings)); renderAdmin(); renderCalendar(); renderSlots(); document.getElementById('moveModal').classList.remove('open'); movingId=null;
  // auto notify
  const url=`https://wa.me/${b.phone.replace(/\D/g,'')}?text=${encodeURIComponent('Ваша запись перенесена на '+b.date+' '+b.time)}`;
  window.open(url,'_blank');
});

/* swipe / click to open admin on scheduleBlock */
const scheduleBlock = document.getElementById('scheduleBlock');
if(scheduleBlock){
  if('ontouchstart' in window){
    let sx=0;
    scheduleBlock.addEventListener('touchstart', e=>{ sx=e.touches[0].clientX; });
    scheduleBlock.addEventListener('touchend', e=>{ const dx=e.changedTouches[0].clientX - sx; if(dx < -60){ openAdmin(); if(navigator.vibrate) navigator.vibrate(40); } });
  } else {
    scheduleBlock.addEventListener('click', ()=>{ openAdmin(); if(navigator.vibrate) navigator.vibrate(30); });
  }
}

/* init */
renderCalendar();
renderSlots();

/* --- Holidays management --- */
let holidays = JSON.parse(localStorage.getItem('holidays')||'[]'); // array of 'YYYY-MM-DD'

function saveHolidays(){ localStorage.setItem('holidays', JSON.stringify(holidays)); }

function renderHolidaysList(){
  const el = document.getElementById('holidaysList');
  if(!el) return;
  el.innerHTML = '';
  if(holidays.length===0){ el.innerHTML = '<div class="small">Нет выходных</div>'; return; }
  holidays.slice().sort().forEach(h=>{
    const row = document.createElement('div'); row.className='booking-item';
    const meta = document.createElement('div'); meta.className='meta';
    meta.innerHTML = '<strong>'+h+'</strong>';
    const actions = document.createElement('div');
    const del = document.createElement('button'); del.className='btn'; del.style.background='#444'; del.textContent='Удалить';
    del.addEventListener('click', ()=>{ if(!confirm('Удалить выходной '+h+'?')) return; removeHoliday(h); });
    actions.appendChild(del);
    row.appendChild(meta); row.appendChild(actions);
    el.appendChild(row);
  });
}

function isHoliday(dateIso){ return holidays.includes(dateIso); }

// mark holiday and weekend in calendar
const origRenderCalendar = renderCalendar;
renderCalendar = function(){
  origRenderCalendar();
  // after rendering days, mark holiday cells
  document.querySelectorAll('#calendar .day').forEach(node=>{
    const iso = node.dataset.date;
    if(!iso) return;
    const dow = new Date(iso).getDay();
    if(!workSchedule[dow]) node.classList.add('weekend');
    if(isHoliday(iso)) node.classList.add('weekend');
  });
};

/* find next available date for booking keeping same time and duration (search next 30 days) */
function findNextAvailable(dateIso, timeStr, duration){
  const start = new Date(dateIso);
  for(let i=1;i<=30;i++){
    const d = new Date(start); d.setDate(start.getDate()+i);
    const iso = localIso(d);
    const dow = d.getDay();
    const sched = workSchedule[dow];
    if(!sched) continue;
    // same start time availability
    if(isAvailable(iso, timeStr, duration)) return iso;
  }
  return null;
}

/* add holiday and auto-move bookings */
function addHoliday(dateIso){
  if(holidays.includes(dateIso)) return;
  holidays.push(dateIso); saveHolidays();
  // find bookings on that date
  const toMove = bookings.filter(b=>b.date===dateIso);
  toMove.forEach(b=>{
    const newDate = findNextAvailable(b.date, b.time, b.duration);
    if(newDate){
      b.date = newDate;
      // notify client via WhatsApp
      const msg = 'Ваша запись перенесена на '+b.date+' '+b.time+'. Услуга: '+b.service;
      window.open('https://wa.me/'+b.phone.replace(/\D/g,'')+'?text='+encodeURIComponent(msg), '_blank');
    } else {
      // if no slot found, leave booking and alert admin
      console.warn('Не удалось найти место для переноса записи', b);
    }
  });
  localStorage.setItem('bookings', JSON.stringify(bookings));
  renderHolidaysList();
  renderAdmin();
  renderCalendar();
  renderSlots();
}

/* remove holiday */
function removeHoliday(dateIso){
  holidays = holidays.filter(h=>h!==dateIso); saveHolidays();
  renderHolidaysList(); renderCalendar(); renderSlots();
}

/* hook admin buttons */
document.addEventListener('DOMContentLoaded', ()=>{
  const addHolidayBtn = document.getElementById('addHolidayBtn');
  const holidayModal = document.getElementById('holidayModal');
  const holidayDate = document.getElementById('holidayDate');
  const saveHoliday = document.getElementById('saveHoliday');
  const cancelHoliday = document.getElementById('cancelHoliday');
  renderHolidaysList();
  if(addHolidayBtn){
    addHolidayBtn.addEventListener('click', ()=>{ holidayModal.classList.add('open'); });
  }
  if(cancelHoliday) cancelHoliday.addEventListener('click', ()=>{ holidayModal.classList.remove('open'); });
  if(saveHoliday){
    saveHoliday.addEventListener('click', ()=>{
      const d = holidayDate.value;
      if(!d){ alert('Выберите дату'); return; }
      addHoliday(d);
      holidayModal.classList.remove('open');
    });
  }
});


/* validate selectedTime when user changes service with auto-pick */
serviceEl.addEventListener('change', ()=>{
  if(!selectedDate) return;
  if(!serviceEl.value) return;
  if(!selectedTime) return; // no time selected yet
  const dur = parseInt(serviceEl.options[serviceEl.selectedIndex].dataset.duration||'1');
  if(!isAvailable(selectedDate, selectedTime, dur)){
    // find next available
    const d = new Date(selectedDate);
    let foundTime = null;
    const dow = d.getDay();
    const sched = workSchedule[dow];
    if(sched){
      for(let h=parseInt(selectedTime); h<=sched.end; h++){
        const t = String(h).padStart(2,'0')+':00';
        if(isAvailable(selectedDate,t,dur)){foundTime=t;break;}
      }
    }
    if(foundTime){
      selectedTime=foundTime; renderSlots();
      alert('Выбранная услуга не помещается в это время. Мы подобрали ближайшее доступное время — '+foundTime);
    }else{
      alert('Выбранная услуга не помещается в это время и нет доступного слота. Выберите другое время.');
      selectedTime=null; renderSlots();
    }
  }
});

</script>
</body>
</html>
