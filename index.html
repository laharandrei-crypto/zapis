<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Записи</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background:#f9f9f9; }
    form { background:#fff; padding:20px; border-radius:8px; max-width:400px; box-shadow:0 0 5px rgba(0,0,0,.1); }
    input,button { display:block; width:100%; margin-bottom:10px; padding:8px; }
    button { background:#4CAF50; color:#fff; border:none; cursor:pointer; font-size:16px; }
    button:hover { background:#45a049; }
  </style>
</head>
<body>

  <h1>Добавить новую запись</h1>
  <form id="addForm">
    <input name="id" placeholder="ID" required>
    <input name="date" type="date" required>
    <input name="time" type="time" required>
    <input name="name" placeholder="Имя" required>
    <input name="phone" placeholder="Телефон" required>
    <input name="service" placeholder="Услуга" required>
    <input name="duration" type="number" placeholder="Длительность (часы)" required>
    <button type="submit">Сохранить</button>
  </form>

  <script>
    // URL твоего Apps Script
    const scriptURL = 'https://script.google.com/macros/s/AKfycbw6X1vA9I9EC_TIjf-mDJUKOmZHvxEZbzVwDRwvP2HBG1TgsajsHuNpWQI-ChvuG19JyA/exec';

    document.getElementById('addForm').addEventListener('submit', async e=>{
      e.preventDefault();
      const form = e.target;
      const data = {
        id: form.id.value,
        date: form.date.value,
        time: form.time.value,
        name: form.name.value,
        phone: form.phone.value,
        service: form.service.value,
        duration: form.duration.value
      };

      try {
        const res = await fetch(scriptURL, {
          method:'POST',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify({
            action:'set_all',
            data:{ bookings:[data], breaks:[], holidays:[] }
          })
        });
        const json = await res.json();
        alert('Ответ сервера: ' + JSON.stringify(json));
        form.reset();
      } catch(err){
        alert('Ошибка: ' + err.message);
      }
    });
  </script>
</body>
</html>
